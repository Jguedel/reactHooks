{"ast":null,"code":"import _toConsumableArray from\"C:/Users/jhguedel/Desktop/New folder/reactHooks/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _regeneratorRuntime from\"C:/Users/jhguedel/Desktop/New folder/reactHooks/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _objectSpread from\"C:/Users/jhguedel/Desktop/New folder/reactHooks/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _objectDestructuringEmpty from\"C:/Users/jhguedel/Desktop/New folder/reactHooks/node_modules/@babel/runtime/helpers/esm/objectDestructuringEmpty.js\";import _asyncToGenerator from\"C:/Users/jhguedel/Desktop/New folder/reactHooks/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"C:/Users/jhguedel/Desktop/New folder/reactHooks/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"C:/Users/jhguedel/Desktop/New folder/reactHooks/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _assertThisInitialized from\"C:/Users/jhguedel/Desktop/New folder/reactHooks/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";import _inherits from\"C:/Users/jhguedel/Desktop/New folder/reactHooks/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"C:/Users/jhguedel/Desktop/New folder/reactHooks/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Component}from\"react\";import axios from\"axios\";import Joke from\"./Joke\";import\"./Styles/JokeList.css\";/** List of jokes. */import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var JokeList=/*#__PURE__*/function(_Component){_inherits(JokeList,_Component);var _super=_createSuper(JokeList);function JokeList(props){var _this;_classCallCheck(this,JokeList);_this=_super.call(this,props);_this.state={jokes:[],isLoading:true};_this.generateNewJokes=_this.generateNewJokes.bind(_assertThisInitialized(_this));_this.vote=_this.vote.bind(_assertThisInitialized(_this));return _this;}/* at mount, get jokes */_createClass(JokeList,[{key:\"componentDidMount\",value:function componentDidMount(){this.getJokes();}/* retrieve jokes from API */},{key:\"getJokes\",value:function(){var _getJokes=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var jokes,seenJokes,res,joke;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;// load jokes one at a time, adding not-yet-seen jokes\njokes=[];seenJokes=new Set();case 3:if(!(jokes.length<this.props.numJokesToGet)){_context.next=11;break;}_context.next=6;return axios.get(\"https://icanhazdadjoke.com\",{headers:{Accept:\"application/json\"}});case 6:res=_context.sent;joke=Object.assign({},(_objectDestructuringEmpty(res.data),res.data));if(!seenJokes.has(joke.id)){seenJokes.add(joke.id);jokes.push(_objectSpread(_objectSpread({},joke),{},{votes:0}));}else{console.log(\"duplicate found!\");}_context.next=3;break;case 11:this.setState({jokes:jokes,isLoading:false});_context.next=17;break;case 14:_context.prev=14;_context.t0=_context[\"catch\"](0);console.error(_context.t0);case 17:case\"end\":return _context.stop();}},_callee,this,[[0,14]]);}));function getJokes(){return _getJokes.apply(this,arguments);}return getJokes;}()/* empty joke list, set to loading state, and then call getJokes */},{key:\"generateNewJokes\",value:function generateNewJokes(){this.setState({isLoading:true});this.getJokes();}/* change vote for this id by delta (+1 or -1) */},{key:\"vote\",value:function vote(id,delta){this.setState(function(st){return{jokes:st.jokes.map(function(j){return j.id===id?_objectSpread(_objectSpread({},j),{},{votes:j.votes+delta}):j;})};});}/* render: either loading spinner or list of sorted jokes. */},{key:\"render\",value:function render(){var _this2=this;var sortedJokes=_toConsumableArray(this.state.jokes).sort(function(a,b){return b.votes-a.votes;});if(this.state.isLoading){return/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-4x fa-spinner fa-spin\"})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"JokeList\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"JokeList-getmore\",onClick:this.generateNewJokes,children:\"Get New Jokes\"}),sortedJokes.map(function(j){return/*#__PURE__*/_jsx(Joke,{text:j.joke,id:j.id,votes:j.votes,vote:_this2.vote},j.id);})]});}}]);return JokeList;}(Component);JokeList.defaultProps={numJokesToGet:5};export default JokeList;","map":{"version":3,"names":["React","Component","axios","Joke","jsx","_jsx","jsxs","_jsxs","JokeList","_Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","state","jokes","isLoading","generateNewJokes","bind","_assertThisInitialized","vote","_createClass","key","value","componentDidMount","getJokes","_getJokes","_asyncToGenerator","_regeneratorRuntime","mark","_callee","seenJokes","res","joke","wrap","_callee$","_context","prev","next","Set","length","numJokesToGet","get","headers","Accept","sent","Object","assign","_objectDestructuringEmpty","data","has","id","add","push","_objectSpread","votes","console","log","setState","t0","error","stop","apply","arguments","delta","st","map","j","render","_this2","sortedJokes","_toConsumableArray","sort","a","b","className","children","onClick","text","defaultProps"],"sources":["C:/Users/jhguedel/Desktop/New folder/reactHooks/src/JokeList.js"],"sourcesContent":["import React, { Component } from \"react\";\r\nimport axios from \"axios\";\r\nimport Joke from \"./Joke\";\r\nimport \"./Styles/JokeList.css\";\r\n\r\n/** List of jokes. */\r\n\r\nclass JokeList extends Component {\r\n  static defaultProps = {\r\n    numJokesToGet: 5,\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      jokes: [],\r\n      isLoading: true,\r\n    };\r\n\r\n    this.generateNewJokes = this.generateNewJokes.bind(this);\r\n    this.vote = this.vote.bind(this);\r\n  }\r\n\r\n  /* at mount, get jokes */\r\n\r\n  componentDidMount() {\r\n    this.getJokes();\r\n  }\r\n\r\n  /* retrieve jokes from API */\r\n\r\n  async getJokes() {\r\n    try {\r\n      // load jokes one at a time, adding not-yet-seen jokes\r\n      let jokes = [];\r\n      let seenJokes = new Set();\r\n\r\n      while (jokes.length < this.props.numJokesToGet) {\r\n        let res = await axios.get(\"https://icanhazdadjoke.com\", {\r\n          headers: { Accept: \"application/json\" },\r\n        });\r\n        let { ...joke } = res.data;\r\n\r\n        if (!seenJokes.has(joke.id)) {\r\n          seenJokes.add(joke.id);\r\n          jokes.push({ ...joke, votes: 0 });\r\n        } else {\r\n          console.log(\"duplicate found!\");\r\n        }\r\n      }\r\n\r\n      this.setState({ jokes, isLoading: false });\r\n    } catch (err) {\r\n      console.error(err);\r\n    }\r\n  }\r\n\r\n  /* empty joke list, set to loading state, and then call getJokes */\r\n\r\n  generateNewJokes() {\r\n    this.setState({ isLoading: true });\r\n    this.getJokes();\r\n  }\r\n\r\n  /* change vote for this id by delta (+1 or -1) */\r\n\r\n  vote(id, delta) {\r\n    this.setState((st) => ({\r\n      jokes: st.jokes.map((j) =>\r\n        j.id === id ? { ...j, votes: j.votes + delta } : j\r\n      ),\r\n    }));\r\n  }\r\n\r\n  /* render: either loading spinner or list of sorted jokes. */\r\n\r\n  render() {\r\n    let sortedJokes = [...this.state.jokes].sort((a, b) => b.votes - a.votes);\r\n    if (this.state.isLoading) {\r\n      return (\r\n        <div className=\"loading\">\r\n          <i className=\"fas fa-4x fa-spinner fa-spin\" />\r\n        </div>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <div className=\"JokeList\">\r\n        <button className=\"JokeList-getmore\" onClick={this.generateNewJokes}>\r\n          Get New Jokes\r\n        </button>\r\n\r\n        {sortedJokes.map((j) => (\r\n          <Joke\r\n            text={j.joke}\r\n            key={j.id}\r\n            id={j.id}\r\n            votes={j.votes}\r\n            vote={this.vote}\r\n          />\r\n        ))}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default JokeList;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}